var dict={NewNotification:{en:"Have a new notification",es:"Tiene una nueva notificación",pt:"Tenha uma nova notificação"},Action:{en:"Action",es:"Acción",pt:"Ação"},Actions:{en:"Actions",es:"Acciones"},ActionTitle:{en:"Action title",es:"Título de la acción",pt:"Título da ação"},Add:{en:"Add",es:"Agregar",pt:"Adicionar"},AddTaskSuccess:{en:"Task has been added successfully!",es:"¡Tarea agregada con éxito!",pt:"Tarefa adicionada com sucesso!"},Transaction:{en:"Transaction",es:"Transacción",pt:"Transação"},TransactionTitle:{en:"Assign a Back Office transaction for a shortcut",es:"Asignar una transacción de Back Office para un acceso directo",pt:"Atribuir uma transação do Back Office para um atalho"},AccessDenied:{en:"Access denied",es:"Acceso denegado",pt:"Acesso negado"},AddWidgetSuccess:{en:"Widget has been added successfully!",es:"¡Widget agregado con éxito!",pt:"Widget adicionado com sucesso!"},Alerts:{en:"Alerts",es:"Alertas",pt:"Alertas"},AreYouSure:{en:"Are you sure?",es:"¿Estás seguro?",pt:"Você tem certeza?"},AssignedTo:{en:"Assigned to",es:"Asignado a",pt:"Atribuído a"},AssignedToTitle:{en:"Is to assign the appointment to one or more users",es:"Es para asignar la cita a uno o varios usuarios",pt:"É atribuir o compromisso a um ou mais usuários"},AssignSelectedTasks:{en:"Assign selected tasks",es:"Asignar tareas seleccionadas",pt:"Atribuir tarefas selecionadas"},AssignSelectedTasksTo:{en:"Assign selected tasks to",es:"Asignar tareas seleccionadas a",pt:"Atribuir tarefas selecionadas a"},Assignment:{en:"Assignment",es:"Asignación",pt:"Atribuição"},Available:{en:"Available",es:"Disponible",pt:"Disponível"},BestTimeToCall:{en:"Best time to call",es:"Mejor momento para llamar"},Cancel:{en:"Cancel",es:"Cancelar",pt:"Cancelar"},CancelNo:{en:"Do not",es:"No",pt:"Não"},Canceled:{en:"Canceled",es:"Cancelada",pt:"Cancelada"},DeleteRowConfirmation:{en:"Are you sure you want to delete the selected records?",es:"¿Está usted seguro de querer eliminar los registros seleccionados?",pt:"Tem certeza de que deseja excluir os registros selecionados?"},ClickToRefreshPage:{en:"Click on 'OK' to refresh the page.",es:"Haz clic en 'OK' para refrescar la página.",pt:"Clique em 'OK' para atualizar a página."},Close:{en:"Close",es:"Cerrar",pt:"Fechar"},Code:{en:"Code",es:"Código",pt:"Código"},Columns:{en:"Columns",es:"Columnas",pt:"Colunas"},Conditions:{en:"Conditions",es:"Condiciones",pt:"Condições"},Configuration:{en:"Configuration",es:"Configuración",pt:"Configuração"},ContinueAnyway:{en:"Do you want to continue anyway?",es:"¿Deseas continuar de todos modos?",pt:"Deseja continuar assim mesmo?"},Copyright:{en:"@2018 InMotion GIT, Inc. All rights reserved",es:"@2018 InMotion GIT. Todos los derechos reservados",pt:"@2018 InMotion GIT. Todos os direitos reservados"},Created:{en:"Created",es:"Creado",pt:"Creado"},CreationDate:{en:"Creation date",es:"Fecha de creación"},CreationUser:{en:"Creation user",es:"Usuario creador"},DateAndTime:{en:"Date and time",es:"Fecha y hora",pt:"Data e hora"},Day:{en:"Day",es:"Día",pt:"Dia"},Deferred:{en:"Postponed",es:"Pospuesta",pt:"Adiada"},Delete:{en:"Delete",es:"Eliminar",pt:"Excluir"},DeleteYes:{en:"Yes",es:"Si",pt:"Sim"},Deleted:{en:"Deleted",es:"Eliminado",pt:"Excluído"},DeleteTask:{en:"Delete task",es:"Eliminar la tarea",pt:"Excluir a tarefa"},DeleteTaskSuccess:{en:"Task has been deleted successfully!",es:"¡Tarea eliminada con éxito!",pt:"Tarefa excluída com sucesso!"},DeleteWidgetSuccess:{en:"Widget has been deleted successfully!",es:"¡Widget eliminado con éxito!",pt:"Widget removido com sucesso!"},DragAndDropColumnsTitle:{en:"Drag the columns you want to select ",es:"Arrastre las columnas que desea seleccionar ",pt:"Arraste as colunas que deseja selecionar "},DragAndDropColumnsDescription:{en:"(the list of selected columns on the right are those that will be visible in the query).",es:"(la lista de columnas seleccionas a la derecha son las que estarán visibles en la consulta).",pt:"(a lista de colunas selecionadas à direita são aquelas que serão visíveis na consulta)."},Edit:{en:"Edit",es:"Editar"},EnableSemaphore:{en:"Enable semaphore",es:"Habilitar semáforo",pt:"Habilitar semáforo"},English:{en:"English",es:"Inglés",pt:"Inglês"},Error:{en:"Error",es:"Error"},ErrorForm:{en:"There has been an error sending the form",es:"Ha ocurrido un error enviando el formulario"},ExecuteTransaction:{en:"Execute transaction",es:"Ejecutar transacción",pt:"Executar transação"},Expiration:{en:"Expiration",es:"Vencimiento",pt:"Vencimento"},ExpirationDate:{en:"Expiration date",es:"Fecha de vencimiento"},ExpiredSession:{en:"The session has expired.",es:"La sesión ha expirado.",pt:"A sessão expirou."},Extension:{en:"Ext.",es:"Ext."},ExtensionNotAllowed:{en:"Extension not allowed.",es:"Extensión no permitida.",pt:"Extensão não permitida."},ExtensionOne:{en:"Ext. 1",es:"Ext. 1"},ExtensionTwo:{en:"Ext. 2",es:"Ext. 2"},Field:{en:"Field",es:"Campo",pt:"Campo"},From:{en:"From",es:"Desde",pt:"De"},LessThenOrEqualTo100:{en:"Enter a value less than or equal to 100.",es:"Ingrese un valor menor o igual a 100.",pt:"Insira um valor menor ou igual a 100."},Help:{en:"Help",es:"Ayuda",pt:"Ajuda"},Home:{en:"Home",es:"Inicio",pt:"Início"},Hour:{en:"Hour",es:"Hora",pt:"Hora"},InactivateUser:{en:"Inactivate user",es:"Inactivar usuario",pt:"Inativar usuário"},InactivateUserSuccess:{en:"User inactivated successfully!",es:"¡Usuario inactivado con éxito!",pt:"Usuário inativado com sucesso!"},InactiveUserIndicator:{en:"The user is already inactive in the period or in part of it!",es:"¡El usuario ya está inactivo en el período o en parte de él!",pt:"O usuário já está inativado no período ou em parte dele!"},InvalidExpirationDate:{es:"La fecha de expiración no puede ser igual o menor a hoy.",en:"The expiration date cannot be the same or less than today.",pt:"A data de validade não pode ser igual ou menor que hoje."},Language:{en:"Language",es:"Idioma",pt:"Idioma"},LineOfBusiness:{en:"Line of business",es:"Línea de negocio",pt:"Linha de negócio"},LogIn:{en:"Log In",es:"Conectar",pt:"Entrar"},LogOut:{en:"Log Out",es:"Desconectar",pt:"Sair"},Minute:{en:"Minute",es:"Minuto",pt:"Minuto"},NewPage:{en:"New page",es:"Nueva página",pt:"Nova página"},NewTask:{en:"New task",es:"Nueva tarea",pt:"Nova tarefa"},TaskTitle:{en:"Task",es:"Tarea",pt:"Tarefa"},No:{en:"No",es:"No",pt:"Não"},NoDataFound:{en:"No data found",es:"No se han encontrado registros"},NotAuthorized:{en:"Your user is not authorized to access this operation.",es:"Su usuario no está autorizado a acceder a esta operación.",pt:"Seu usuário não está autorizado a acessar essa operação."},NotInitiated:{en:"Not initiated",es:"No iniciada",pt:"Não iniciada"},NoteRequired:{en:"Note required",es:"Nota requerida"},NumberDays:{en:"Number of days without performing the task",es:"Cantidad de días sin atender la tarea",pt:"Quantidade de dias sen atender a tarefa"},Operator:{en:"Operator",es:"Operador",pt:"Operador"},Operation:{en:"Operation",es:"Operación",pt:"Operação"},Pending:{en:"Pending",es:"Pendiente",pt:"Pendente"},PhoneNumber:{en:"Phone n°",es:"N° telefónico"},PhoneNumberRequired:{en:"Phone number required",es:"Número telefónico requerido"},Phones:{en:"Phones",es:"Teléfonos"},Portuguese:{en:"Portuguese",es:"Portugués",pt:"Português"},PrivacyPolicy:{en:"Privacy Policy",es:"Política de privacidad",pt:"Política de Privacidade"},Profile:{en:"Profile",es:"Perfil",pt:"Perfil"},PasswordChange:{en:"Password Change",es:"Cambio de contraseña",pt:"Mudança de senha"},RecordOwnerRequired:{en:"Record owner is required",es:"Propietario es requerido"},RecordOwnerValid:{en:"Record owner is invalid",es:"Propietario no es válido"},RequiredField:{en:"The field is required.",es:"El campo es requerido.",pt:"O campo é requerido."},PageNameMaxLength:{en:"The maximum length of the title of the page is 45 characters.",es:"La longitud máxima del titulo de la página es de 45 caracteres.",pt:"O comprimento máximo do título da página é de 45 caracteres."},PageOrderMaxLength:{en:"The maximum value for ordering the pages is 999.",es:"El valor máximo para ordenar las páginas es de 999.",pt:"O valor máximo para encomendar as páginas é 999."},OnlyDigit:{en:"The field only allows numerics.",es:"El campo sólo permite numéricos.",pt:"O campo só permite valores numéricos."},ResourceNotFound:{en:"Resource not found.",es:"Recurso no encontrado.",pt:"Recurso não encontrado."},ResourceNotFoundDetail:{en:"Sorry, but the resource you are looking for has not been found.",es:"Lo sentimos, pero el recurso que está buscando no se ha encontrado.",pt:"Desculpe, mas o recurso que está procurando não foi encontrado."},ResourceUnauthorized:{en:"Unauthorized User.",es:"Usuario no autorizado.",pt:"Usuário não autorizado."},ResourceUnauthorizedDetail:{en:"Sorry, but the resource you are looking for has not been found.",es:"Su cuenta no posee los roles necesarios para poder acceder la página indicada.",pt:"Sua conta não possui as funções necessárias para acessar a página indicada."},Save:{en:"Save",es:"Guardar",pt:"Salvar"},SearchTransaction:{en:"Go to",es:"Ir a",pt:"Ir a"},Selected:{en:"Selected",es:"Seleccionado",pt:"Selecionado"},SelectedNodeConditions:{en:"(Conditions of the selected node)",es:"(Condiciones de la rama seleccionada)",pt:"(Condições do nó selecionado)"},Semaphore:{en:"Semaphore",es:"Semáforo",pt:"Semáforo"},SemaphoreConfig:{en:"Semaphore configuration",es:"Configuración del semáforo",pt:"Configuração do semáforo"},Spanish:{en:"Spanish",es:"Español",pt:"Espanhol"},Status:{en:"Status",es:"Estado",pt:"Estado"},TransactionSearch:{en:"Click to search transaction",es:"Hacer clic para buscar transacción",pt:"Clique para pesquisar a transação"},Subject:{en:"Subject",es:"Asunto",pt:"Assunto"},SubjectTitle:{en:"Name of the appointment or a brief description",es:"Nombre de la cita o una breve descripción",pt:"Nome do compromisso ou uma breve descrição"},Location:{en:"Location",es:"Ubicación",pt:"Localização"},LocationTitle:{en:"Meeting place of appointment",es:"Lugar de encuentro de la cita",pt:"Lugar de reunião de compromisso"},StartingTime:{en:"Starting date",es:"Fecha de inicio",pt:"Data de início"},StartingTimeTitle:{en:"Time and date where the appointment begins",es:"Hora y fecha donde comienza la cita",pt:"Hora e data em que o compromisso começa"},EndingTime:{en:"Ending date",es:"Fecha de vencimiento",pt:"Data de vencimento"},EndingTimeTitle:{en:"Appointment end time and date",es:"Hora y fecha de finalización de la cita",pt:"Hora e data de término do compromisso"},Reminder:{en:"Reminder",es:"Recordatorio",pt:"Lembrete"},ReminderTitle:{en:"Time interval to remind the user (s) of the pending appointment",es:"Intervalo de tiempo para recordarle al usuario(s) la cita pendiente",pt:"Intervalo de tempo para lembrar o (s) usuário (s) do compromisso pendente"},IndividualTaskIndicator:{en:"The task can only be performed by one person",es:"La tarea sólo puede ser realizada por una persona",pt:"A tarefa pode ser realizada somente por uma pessoa"},IndividualTaskIndicatorTitle:{en:"If this option is enabled, only one user can accept the appointment as completed",es:"Si esta opción está habilitada solo un usuario puede aceptar como completada dicha cita",pt:"Se esta opção estiver habilitada, somente um usuário pode aceitar o compromisso como concluído"},WarningWhenCompleted:{en:"Send message when the task is completed",es:"Mandar mensaje cuando la tarea sea completada",pt:"Enviar mensagem quando a tarefa estiver concluída"},WarningWhenCompletedTitle:{en:"If this option is enabled an email will be sent to the user who assigned the appointment",es:"Si esta opción está habilitada se le enviará un correo electrónico al usuario que asignó la cita",pt:"Se essa opção for ativada, um email será enviado ao usuário que atribuiu o compromisso"},AllDayActivity:{en:"Activate all day",es:"Activar todo el dia",pt:"Ativar o dia todo"},AllDayActivityTitle:{en:"If this option is enabled, the user must make the appointment throughout the day (24 hours) and the start and end time will not be taken into account",es:"Si esta opción está habilitada el usuario deberá de realizar la cita durante todo el día (24 horas) y no se tomará en cuenta la hora de inicio y fin",pt:"Se essa opção for ativada, o usuário deverá fazer o compromisso durante o dia (24 horas) e as horas de início e término não serão consideradas"},OperatorEquals:{en:"Equals",es:"Es igual a",pt:"É igual a"},OperatorGreaterThan:{en:"Greater than",es:"Mayor que",pt:"Melhor que"},OperatorGreaterThanOrEqual:{en:"Greater than or equal",es:"Mayor o igual que",pt:"Maior que ou igual"},OperatorLessThan:{en:"Less than",es:"Menor que",pt:"Menos que"},OperatorLessThanOrEqual:{en:"Less than or equal",es:"Menor o igual que ",pt:"Menor ou igual"},Priority:{en:"Priority",es:"Prioridad",pt:"Prioridade"},PriorityTitle:{en:"This appointment will have preference according to the value. The possible values are standard, low and high",es:"Esta cita tendrá preferencia según el valor. Los posibles valores son estándar, baja y alta",pt:"Esta nomeação terá preferência de acordo com o valor. Os valores possíveis são padrão, baixo e alto"},Completed:{en:"Completed",es:"Completada",pt:"Concluída"},CompletedTitle:{en:"Calculation of the percentage of completion of the appointment",es:"Cálculo de porcentaje de finalización de la cita",pt:"Cálculo do percentual de conclusão da consulta"},See:{en:"See",es:"Ver"},TaskMailboxes:{en:"Mailboxes",es:"Bandejas de tareas",pt:"Diretórios de tarefas"},TaskMailboxesConfig:{en:"Mailboxes configuration",es:"Configuración de bandejas de tareas",pt:"Configuração de diretórios de tarefas"},TaskMailboxesConfigAdmin:{en:"Default mailboxes configuration",es:"Configuración de bandejas de tareas por defecto",pt:"Configuração de diretórios de tarefas"},Tasks:{en:"Tasks",es:"Tareas",pt:"Tarefas"},TransactionNotAllowed:{en:"The transaction is not allowed regarding its scheme.",es:"La transacción no está permitida para su esquema.",pt:"A transação não está permitida para o seu esquema."},TaskActionTitleDescription:{en:"Describe an action",es:"Describe una acción",pt:"Descreve uma ação"},TaskAssignmentDescription:{en:"Date and time of task creation",es:"Fecha y hora de creación de la tarea",pt:"Data e hora da criação da tarefa"},TaskCompletedDescription:{en:"Indicates the percentage completed",es:"Indica el porcentaje completado",pt:"Indica o percentual completado"},TaskDetail:{en:"See task detail",es:"Ver detalle de la tarea",pt:"Ver detalhe da tarefa"},TaskExpirationDescription:{en:"Date and time of task expiration",es:"Fecha y hora de vencimiento de la tarea",pt:"Data e hora de vencimento da tarefa"},TaskHistory:{en:"See task history",es:"Ver historia de la tarea",pt:"Ver historico da tarefa"},TaskIdentifier:{en:"Task identifier",es:"Identificador de la tarea",pt:"Identificador da tarefa"},TaskLineOfBusinessDescription:{en:"Identify the line of business",es:"Identifica la línea de negocio",pt:"Identifica a linha de negócio"},TaskPriorityDescription:{en:"Indicates the task importance",es:"Indica la importancia de la tarea",pt:"Indica a importância da tarefa"},TaskStatus:{en:"Task status",es:"Estado de la tarea",pt:"Estado da tarefa"},taskLongDescriptionTitle:{en:"A description of the task to be performed",es:"Una descripción de la tarea a realizar",pt:"Uma descrição da tarefa a ser executada"},TaskStatusTitle:{en:"Possible values are pending, completed, waiting, postponed, canceled",es:"Los posibles valores son pendiente, completada, en espera, pospuesta, cancelada",pt:"Os valores possíveis estão pendentes, concluídos, aguardando, adiados, cancelados"},TaskStatusDescription:{en:"Current task status",es:"Estado actual de la tarea",pt:"Estado atual da tarefa"},TaskSubjectDescription:{en:"Describe the task main subject",es:"Describe el asunto principal de la tarea",pt:"Descreve o assunto principal da tarefa"},TaskTypeDescription:{en:"Indicates the task type",es:"Indica el tipo de la tarea",pt:"Indica o tipo da tarefa"},TermsService:{en:"Terms of Service",es:"Términos de servicio",pt:"Termos de Serviço"},To:{en:"To",es:"Hasta",pt:"Até"},Type:{en:"Type",es:"Tipo",pt:"Tipo"},TypeOfPhone:{en:"Type of phone",es:"Tipo de teléfono"},UnexpectedError:{en:"Something unexpected has occurred.",es:"Ha ocurrido algo inesperado.",pt:"Ocorreu algo inesperado."},UnexpectedErrorDetail:{en:"The server encountered something unexpected that didn't allow it to complete the request. We apologize.",es:"El servidor encontró algo inesperado que no le permitió completar la solicitud. Pedimos disculpas.",pt:"O servidor encontrou algo inesperado que não permitiu completar a solicitação. Pedimos desculpas."},Update:{en:"Update",es:"Actualizar",pt:"Editar"},UpdateDate:{en:"Update date",es:"Fecha de actualización"},UpdateUser:{en:"Update user",es:"Usario que actualiza"},Updated:{en:"Updated",es:"Actualizado",pt:"Editado"},UpdateTaskStatus:{en:"Change task status",es:"Cambiar estado de la tarea",pt:"Alterar status da tarefa"},UpdateTaskSuccess:{en:"Task has been updated successfully!",es:"¡Tarea actualizada con éxito!",pt:"Tarefa alterada com sucesso!"},User:{en:"User",es:"Usuario",pt:"Usuário"},Value:{en:"Value",es:"Valor",pt:"Valor"},Yes:{en:"Yes",es:"Sí",pt:"Sim"},Waiting:{en:"Waiting",es:"En espera",pt:"Em espera"},WaitingTime:{en:"Waiting time",es:"Tiempo de espera",pt:"Tempo de espera"},WaitingTimeDescription:{en:"Time since the task creation",es:"Tiempo transcurrido desde la creación de la tarea",pt:"Tempo decorrido desde a criacao da tarefa"},Week:{en:"Week",es:"Semana",pt:"Semana"},STSFailureMessage:{en:"The STS service is not available.",es:"No está disponible el servicio de STS.",pt:"O serviço STS não está disponível."},STSFailureTitle:{en:"The STS service is not available.",es:"No está disponible el servicio de STS.",pt:"O serviço STS não está disponível."},AutoLogInTitle:{en:"Start automatic session",es:"Inicio sesión automático",pt:"Iniciar sessão automática"},AutoLogInBody:{en:"It will load the current page with find to contextualize the user, it will be automatically recharged",es:"Se va cargar la página actual con find de contextualizar el usuario, se va recargara automaticamente",pt:"Ele irá carregar a página atual com find para contextualizar o usuário, ele será automaticamente recarregado"},ConfirmationDeletionPage:{en:"Are you sure you want to delete the page?",es:"¿Está usted seguro de querer eliminar la página?",pt:"Are you sure you want to delete the page?"},ConfirmationDeletionPageWithWigets:{en:"Are you sure you want to delete the page and the widgets it contains?",es:"¿Está usted seguro de querer eliminar la página y los widgets que contiene?",pt:"Tem certeza de que deseja excluir a página e os widgets que ela contém?"},ExpiredSessionTitle:{en:"Expired session",es:"Sesión vencida",pt:"Sessão expirada"},ExpiredSessionBody:{en:"Your session has expired, due to safety issues your user is automatically disconnected",es:"Su sesión ha vencido, por asunto de seguridad se desconecta automaticamente su usuario",pt:"Sua sessão expirou, devido a problemas de segurança, seu usuário é desconectado automaticamente"},ExpirationSectionTitle:{en:"Session expiration",es:"Expiración de sesión",pt:"Expiração da sessão"},ExpirationSectionBody:{en:"Your session will expire and it will redirect in",es:"Su sesión se va a vencer y se va a redireccionar al inicio en",pt:"Sua sessão expirará e será redirecionada"},ExpirationSectionBtnCancel:{en:"Close and go to start",es:"Cerrar e ir a inicio",pt:"Feche e vá para começar"},ExpirationSectionBtnSessionKeep:{en:"Keep session",es:"Mantener sesión",pt:"Feche e vá para começar"},Seconds:{en:"seconds",es:"segundos",pt:"segundos"}},translator=new function(){this.translatorObj=null,this.initialize=function(e){translator.translatorObj=$("body").translate({lang:e,t:dict})},this.changeLanguage=function(e){translator.translatorObj.lang(e)}};app.core=(AjaxCallWebMethod=function(e,t,a,n,o,r){var s=null;return n&&$.LoadingOverlay("show"),$.ajax({type:"POST",url:e,contentType:"application/json; charset=utf-8",dataType:"json",async:a,data:t,headers:{"Accept-Language":generalSupport.LanguageName()},beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+app.user.token)}}).done(function(e){s=e,n&&$.LoadingOverlay("hide"),void 0!==e.d&&void 0!==e.d.Success&&!1===e.d.Success&&void 0!==e.d.Reason&&NotifyFail(e.d.Code,e.d.Reason),void 0!==o&&o(e)}).fail(function(e,t,a){n&&$.LoadingOverlay("hide"),void 0!==r&&r(),ErrorHandler(e,t,a)}),s},AjaxCall=function(e,t,a,n,o,r,s){return r&&$.LoadingOverlay("show"),$.ajax({url:t,type:e,contentType:"application/json; charset=utf-8",dataType:"json",async:o,cache:!1,data:n,headers:{"Accept-Language":generalSupport.LanguageName()},beforeSend:function(e){null!=a&&1!=a||e.setRequestHeader("Authorization","Bearer "+app.user.token)},success:function(e){r&&$.LoadingOverlay("hide"),void 0!==e.d&&void 0!==e.d.Success?(!1===e.d.Success&&void 0!==e.d.Reason&&NotifyFail(e.d.Code,e.d.Reason),s(e)):s(e)},error:function(e,t,a){r&&$.LoadingOverlay("hide"),ErrorHandler(e,t,a)}})},ErrorHandler=function(e,t,a){if(401!==e.status){var n="",o="";if(void 0!==e.responseJSON)console.log(e.responseJSON);else if(void 0!==e.responseText){var r=this.ResponseTextHandler(e.responseText);r.compilation&&(o="Error de compilación",n=r.detail)}else console.log(e);""===n&&e.responseJSON&&e.responseJSON.Code&&(n=this.ErrorDescription(e.responseJSON.Code)),""!==n?notification.swal.error(o,n):notification.swal.error("Ha ocurrido una falla, por favor intente nuevamente","si la falla persiste, contacte al personal técnico")}else{var s=generalSupport.LanguageName();null!=s&&null!=s||(s=constants.defaultLanguageName),notification.swal.infoCallback(dict.NotAuthorized[s],dict.ClickToRefreshPage[s],function(){window.location.reload(!0)})}},ResponseTextHandler=function(e){var t=-1,a={error:null,detail:null,source:null,compilation:!1};try{e.indexOf("<title>Compilation Error</title>")>-1?(a.compilation=!0,a.error="Compilation error",(t=e.indexOf("<b> Compiler Error Message: </b>"))>-1&&(e=e.substring(t+32)),(t=e.indexOf("<br><br>"))>-1&&(a.detail=$("<div/>").html(e.substring(0,t)).text(),e=e.substring(t+8)),(t=e.indexOf("<code><pre>"))>-1&&(e=e.substring(t+11)),(t=e.indexOf("Line "))>-1&&(e=e.substring(t)),(t=e.indexOf("</pre></code>"))>-1&&(a.source=e.substring(0,t),a.source=$("<div/>").html(a.source).text()),console.error(a)):console.error(e)}catch(t){console.error(e)}return a},ErrorDescription=function(e){var t="";return $.ajax({type:"GET",url:constants.fasiApi.base+"fasi/v1/ErrorMessage?code="+e+"&languageId="+generalSupport.LanguageId(),contentType:"application/json; charset=utf-8",dataType:"json",async:!1,data:JSON.stringify({}),beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+app.user.token)},success:function(e){t=e.Data},error:function(e,a,n){t="Ha ocurrido una falla, por favor intente nuevamente"}}),t},NotifyFail=function(e,t){var a;"401"!=e?(console.error({code:e,detail:t}),""!==e&&void 0!==e||(e="1"),"901"!=e?""!==(a=ErrorDescription(e))?notification.swal.error("",a):notification.swal.error("",t):app.user.isAnonymous&&(window.location.href.toLowerCase().toString().includes("fasi/dli/queries")?location.reload():window.location="/fasi/default.aspx?GSCode="+data.authorization.Code)):notification.swal.infoCallback(dict.NotAuthorized[generalSupport.LanguageName()],dict.ClickToRefreshPage[generalSupport.LanguageName()],function(){window.location.reload(!0)})},Setting=function(e){return app.core.SyncWebMethod("/fasi/wmethods/general.aspx/SettingValue",!1,JSON.stringify({name:e})).d},{ErrorHandler:function(e,t,a){return ErrorHandler(e,t,a)},AsyncWebMethod:function(e,t,a,n,o){return AjaxCallWebMethod(e,a,!0,t,n,o)},SyncWebMethod:function(e,t,a,n,o){return AjaxCallWebMethod(e,a,!1,t,n,o)},AsyncGet:function(e,t,a,n,o){return AjaxCall("GET",e,t,n,!0,a,o)},SyncGet:function(e,t,a,n,o){return AjaxCall("GET",e,t,n,!1,a,o)},Get:function(e,t,a,n,o,r,s){return AjaxCall("GET",e,n,o,a,t,r)},Post:function(e,t,a,n,o,r,s){return AjaxCall("POST",e,n,o,a,t,r)},Put:function(e,t,a,n,o,r){return AjaxCall("PUT",e,token,n,a,t,o)},Delete:function(e,t,a,n,o,r){return AjaxCall("DELETE",e,token,n,a,t,o)},Setting:function(e){return Setting(e)}});var generalSupport=new function(){this.Settings=function(){var e;return generalSupport.Operation("settings",{id:""},function(t){e=t.d}),e},this.findKey=function(e,t){return Array.isArray(e)?$.grep(e,function(e){return e.Key===t})[0].Value:e[t]},this.ResourceByKey=function(e){var t="";if(localStorage.getItem("GeneralResource_"+generalSupport.LanguageName().toLowerCase())){var a=JSON.parse(localStorage.getItem("GeneralResource_"+generalSupport.LanguageName().toLowerCase()));t=a.app[e]}else $.ajax({url:"/fasi/locales/General."+generalSupport.LanguageName().toLowerCase()+".json",dataType:"json",data:a,async:!1,success:function(a){var n=a;localStorage.setItem("GeneralResource_"+generalSupport.LanguageName().toLowerCase(),JSON.stringify(n)),t=n.app[e]}});return t},this.Operation=function(e,t,a){app.core.Post("/fasi/wmethods/User.aspx/Operation",!1,!1,!1,JSON.stringify({operation:e,body:JSON.stringify(t)}),function(e){a(e)},null)},String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),this.ExtendValidators=function(){$.validator.addMethod("AutoNumericRequired",function(e,t){return this.optional(t)||0!==AutoNumeric.getNumber("#"+t.id)},"El campo es requerido"),$.validator.addMethod("AutoNumericMinValue",function(e,t,a){var n=!0;return AutoNumeric.getNumber("#"+t.id)<a&&(n=!1),n}),$.validator.addMethod("AutoNumericMaxValue",function(e,t,a){var n=!0;return AutoNumeric.getNumber("#"+t.id)>a&&(n=!1),n}),$.validator.addMethod("DatePicker",function(e,t){var a=!0;return this.optional(t)||generalSupport.DatePickerValue("#"+t.id)<=moment(new Date("0001-01-01T00:00:00")).utc()&&(a=!1),a}),$.validator.addMethod("OnlyNumber",function(e,t,a){var n=!0;return this.optional(t)||/^[0-9]+$/.test(e)||(n=!1),n},"Formato invalido, solo se aceptan dígitos numéricos")},this.NumericValue=function(e,t,a){var n=AutoNumeric.getNumber(e);return n<t&&(n=t),n>a&&(n=a),n},Array.prototype.contains=function(e){for(var t=this.length;t--;)if(this[t]===e)return!0;return!1},this.LocalStorageRemoveStartWith=function(e){for(var t=[],a=0;a<localStorage.length;a++)-1!==localStorage.key(a).indexOf(e)&&t.push(localStorage.key(a));for(a=0;a<t.length;a++)localStorage.removeItem(t[a])},this.NormalizeProperties=function(e,t){var a;return""!==t&&(a=t.split(","),e.forEach(function(e){for(var t in e){if(!0===a.contains(t)){var n=e[t];"[object String]"===Object.prototype.toString.call(n)&&-1!==n.indexOf("Date")&&(e[t]=generalSupport.ToJavaScriptDate2(n))}}})),e},this.SessionContext=function(){return localStorage.getItem("languageId")||(localStorage.setItem("languageId",constants.defaultLanguageId),localStorage.setItem("languageName",constants.defaultLanguageName)),{languageId:localStorage.getItem("languageId"),clientId:app.user.clientId,producerId:app.user.producerId}},this.UserContext=function(){if("undefined"!=typeof masterSupport&&0==window.location.pathname.toLowerCase().endsWith("/fasi/default.aspx")){masterSupport.Init();var e=generalSupport.Settings();constantsSupport.setup(e)}return console.warn("Opción sin optimizar"),void 0===generalSupport.user&&("undefined"!=typeof masterSupport&&void 0!==masterSupport.user?generalSupport.user=masterSupport.user:generalSupport.getUser()),-1!==generalSupport.user.languageName.toLowerCase().indexOf("-")&&(generalSupport.user.languageName=generalSupport.user.languageName.split("-")[0]),app.user=generalSupport.user,generalSupport.user},this.UserConvert=function(e){return{userName:e.username,userId:e.userId,companyId:e.companyId,isAnonymous:e.isAnonymous,isAdministrator:e.isAdministrator,schemeCode:e.schemeCode,token:e.token,clientId:e.clientId,producerId:e.producerId,firstNameAndSecondLastName:e.firstNameAndSecondLastName,languageID:e.languageID,languageName:e.languageName,type:e.type,utcOffset:e.utcOffset,isEmployee:e.IsEmployee,sessionId:e.sessionId,expiration:e.expiration,timeZoneVT:e.TimeZoneVT}},this.getUser=function(){if(window.location.pathname.toLowerCase().endsWith("default.aspx"))generalSupport.user=generalSupport.UserConvert(app.user),app.security.TokenInit(app.user.token,!0);else{console.warn("Opción sin optimizar");var e="/fasi/wmethods/User.aspx/GetUserInformation";languageName=generalSupport.GetParameterByName("culture"),languageName&&(e=e+"?culture="+languageName),$.ajax({type:"GET",url:e,contentType:"application/json; charset=utf-8",async:!1,dataType:"json"}).done(function(e){generalSupport.user=generalSupport.UserConvert(e.d),app.user=generalSupport.user,app.security.TokenInit(app.user.token,!0)}).fail(function(e,t,a){401==e.status&&app.security.EndSession()})}generalSupport.CreateVTTimeZone()},this.URLDateValue=function(e){var t=generalSupport.URLValue(e);return null!==t&&(t=moment(t,generalSupport.DateFormat()).format(generalSupport.DateFormat())),t},this.URLNumericValue=function(e){var t=generalSupport.URLValue(e);return t=null===t?0:isNaN(t)?0:parseInt(t)},this.URLStringValue=function(e){var t=generalSupport.URLValue(e);return null===t&&(t=""),t},this.URLValue=function(e){e=(e=e.replace(/[\[]/,"\\[")).replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)","i"),a=unescape(window.location.href),n=t.exec(a);return null===n?null:n[1]},this.ErrorHandler=function(e,t,a,n){var o="",r=!1,s="";if(401!==e.status){if(void 0!==e.responseJSON)(e.responseJSON.Code||e.responseJSON.Reason)&&(r=!0,generalSupport.NotifyFail(e.responseJSON.Reason,e.responseJSON.Code,n));else if(void 0!==e.responseText){var i=this.ResponseTextHandler(e.responseText);i.compilation&&(s="Error de compilación",o=i.detail)}else console.log(e);""===o&&e.responseJSON&&e.responseJSON.Code&&(o=this.ErrorDescription(e.responseJSON.Code)),r||(""!==o?notification.swal.error(s,o):notification.swal.error("Ha ocurrido una falla, por favor intente nuevamente","si la falla persiste, contacte al personal técnico"))}else{var l=generalSupport.LanguageName();null!=l&&null!=l||(l=constants.defaultLanguageName),notification.swal.infoCallback(dict.NotAuthorized[l],dict.ClickToRefreshPage[l],function(){window.location.reload(!0)})}},this.ResponseTextHandler=function(e){var t=-1,a={error:null,detail:null,source:null,compilation:!1};try{e.indexOf("<title>Compilation Error</title>")>-1?(a.compilation=!0,a.error="Compilation error",(t=e.indexOf("<b> Compiler Error Message: </b>"))>-1&&(e=e.substring(t+32)),(t=e.indexOf("<br><br>"))>-1&&(a.detail=$("<div/>").html(e.substring(0,t)).text(),e=e.substring(t+8)),(t=e.indexOf("<code><pre>"))>-1&&(e=e.substring(t+11)),(t=e.indexOf("Line "))>-1&&(e=e.substring(t)),(t=e.indexOf("</pre></code>"))>-1&&(a.source=e.substring(0,t),a.source=$("<div/>").html(a.source).text()),console.error(a)):console.error(e)}catch(t){console.error(e)}return a},this.ErrorDescription=function(e){null===e&&(e="");var t="";return app.core.Get(constants.fasiApi.base+"fasi/v1/ErrorMessage?code="+e+"&languageId="+generalSupport.LanguageId(),!1,!1,void 0,null,function(e){t=e.Data},null),t},this.NotifyErrorValidate=function(e){var t="";t=(t=e.numberOfInvalids()>1?this.ResourceByKey("HasPruralsErrors"):this.ResourceByKey("HasSingularErrors")).replace("{0}",e.numberOfInvalids()),notification.toastr.error("",t);for(var a=e.errorList.length,n=0;n<a;n++)console.log(e.errorList[n].message)},this.ToJavaScriptDate2=function(e){if(null===e)return null;if(null!==/Date\(([^)]+)\)/.exec(e)){var t=moment(e);return t.year()<=1?"":new Date(t.year(),t.month(),t.date())}return moment(e,"YYYY-MM-DD").toDate()},this.ToJavaScriptDateCustom=function(e,t){if(e){var a,n;if(null!==/Date\(([^)]+)\)/.exec(e)){var o=moment(e);return o.year()<=1?"":o.format(t)}if(e._isAMomentObject)n=moment(e);else{var r=e.split("/");n=moment(r[2]+"-"+r[1]+"-"+r[0])}return null!=t?(a=moment(e).utc().format(t),1===n.year()?"":a):(a=moment(e),1===n.year()?"":a)}return""},this.ServerBehavior=function(e){if(null!=e){var t;if(void 0!==e.controlbehavior&&null!==e.controlbehavior)$.each(e.controlbehavior,function(){switch(t=this.id,this.property){case"hide":t.endsWith(":Grid")?(t=t.substring(0,t.length-5),$("#"+t+"Container").toggleClass("hidden",!0)):t.endsWith(":Date")?(t=t.substring(0,t.length-5),$("#"+t).toggleClass("hidden",!0),$("#"+t+"_group").toggleClass("hidden",!0),$("#"+t+"Label").toggleClass("hidden",!0)):t.endsWith(":Address")?(t=t.substring(0,t.length-8),AddressSupport.Visible(t,!1)):(t.endsWith("Wrap")&&(t=t.substring(0,t.length-4)),$("#"+t+"Label").toggleClass("hidden",!0),$("#"+t+"Required").toggleClass("hidden",!0),$("#"+this.id).next(".select2-container").length>0?($("#"+this.id).hide(),$("#"+this.id).next(".select2-container").hide()):$("#"+this.id).length>0?$("#"+this.id).toggleClass("hidden",!0):$("input:radio[name="+this.id+"]").parent().toggleClass("hidden",!0));break;case"show":t.endsWith(":Grid")?(t=t.substring(0,t.length-5),$("#"+t+"Container").toggleClass("hidden",!1)):t.endsWith(":Date")?(t=t.substring(0,t.length-5),$("#"+t).toggleClass("hidden",!1),$("#"+t+"_group").toggleClass("hidden",!1),$("#"+t+"Label").toggleClass("hidden",!1)):t.endsWith(":Address")?(t=t.substring(0,t.length-8),AddressSupport.Visible(t,!0)):(t.endsWith("Wrap")&&(t=t.substring(0,t.length-4)),$("#"+t+"Label").toggleClass("hidden",!1),$("#"+t+"Required").toggleClass("hidden",!1),$("#"+this.id).next(".select2-container").length>0?($("#"+this.id).show(),$("#"+this.id).next(".select2-container").show()):$("#"+this.id).length>0?$("#"+this.id).toggleClass("hidden",!1):$("input:radio[name="+this.id+"]").parent().toggleClass("hidden",!1));break;case"disabled":t.endsWith(":Grid")?(t=t.substring(0,t.length-5),$("#"+t+"Tbl *, #"+t+"Popup .modal-body *, #"+t+"Popup .modal-footer *").prop("disabled",!0)):t.endsWith(":Address")?(t=t.substring(0,t.length-8),AddressSupport.Enable(t,!1)):$('.nav-tabs a[href="#'+this.id+'Panel"]').length>0?($("#"+this.id).toggleClass("disabled",!0),$("#"+this.id+"Panel :input").prop("disabled",!0)):$("#"+this.id).is("div")?$("#"+this.id+" :input").prop("disabled",!0):$("#"+this.id).length>0?$("#"+this.id).prop("disabled",!0):$("input:radio[name="+this.id+"]").prop("disabled",!0);break;case"enabled":t.endsWith(":Grid")?(t=t.substring(0,t.length-5),$("#"+t+"Tbl *, #"+t+"Popup .modal-body *, #"+t+"Popup .modal-footer *").prop("disabled",!1)):t.endsWith(":Address")?(t=t.substring(0,t.length-8),AddressSupport.Enable(t,!0)):$('.nav-tabs a[href="#'+this.id+'Panel"]').length>0?($("#"+this.id).toggleClass("disabled",!1),$("#"+this.id+"Panel :input").prop("disabled",!1)):$("#"+this.id).is("div")?$("#"+this.id+" :input").prop("disabled",!1):$("#"+this.id).length>0?$("#"+this.id).prop("disabled",!1):$("input:radio[name="+this.id+"]").prop("disabled",!1);break;case"active":$('.nav-tabs a[href="#'+this.id+'Panel"]').tab("show");break;case"click":$("#"+this.id).click();break;case"enableColumnLink":$("#"+this.id+"Tbl a").removeClass("DisableColumnLink");break;case"disableColumnLink":$("#"+this.id+"Tbl a").addClass("DisableColumnLink")}});if(void 0!==e.redirect&&null!==e.redirect&&""!==e.redirect&&(null===e.redirectsetting?window.location.href=e.redirect:window.open(e.redirect.replace("Popup.aspx","Popup.html"),"_blank",e.redirectsetting)),void 0!==e.notify&&null!==e.notify&&""!==e.notify)if(null!==e.notify.splash&&""!==e.notify.splash)notification.splash.info("",e.notify.splash);else if(null!==e.notify.popup)$.each(e.notify.popup,function(e,t){notification.swal.info("",t)});else if(null===e.notify.mode&&"alert"!==e.notify.mode||$("#alerts-container").html(""),null!==e.notify.messages)if(e.notify.messages.length>1)if(null!==e.notify.mode||"alert"===e.notify.mode)for(i=0;i<e.notify.messages.length;i++)notification.alert.error(null,e.notify.messages[i].message);else{var a="";for(i=0;i<e.notify.messages.length;i++)a+='<li class=""><label id="'+e.notify.messages[i].controlname+'-error" for="'+e.notify.messages[i].controlname+'">'+e.notify.messages[i].message+"</label></li>";toastr.error(a,null,{closeButton:!0,preventDuplicates:!0,progressBar:!0,timeOut:3e4,extendedTimeOut:2e4,positionClass:"toast-top-right"}).attr("style","width: 400px !important")}else $.each(e.notify.messages,function(e,t){switch(t.type){case"Error":notification.swal.error("",t.message);break;case"Warning":notification.swal.warning("",t.message);break;case"Message":notification.swal.info("",t.message)}})}},this.GetParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i");return results=a.exec(t),results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null},this.base64ToArrayBuffer=function(e,t){var a,n,o,r,s,l=e.length,u=Math.ceil(l/1024),c="";for(r=0;r<u;r++){for(a=1024*r,n=Math.min(a+1024,l),o=new Array(n-a),s=a,i=0;s<n;++i,++s)o[i]=e[s];c+=String.fromCharCode.apply(null,o)}var d=btoa(c),p=atob(d),g=p.length;u=Math.ceil(g/1024);var f=new Array(u);for(r=0;r<u;r++){for(a=1024*r,n=Math.min(a+1024,g),o=new Array(n-a),s=a,i=0;s<n;++i,++s)o[i]=p.charCodeAt(s);f[r]=new Uint8Array(o)}generalSupport.saveByteArray(f,t)},this.saveByteArray=function(e,t){var a=new Blob(e),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t,n.click()},this.jsDateToWCF=function(e,t){return"/Date("+moment(e,t).utc().valueOf()+")/"},this.Select2GetValue=function(e,t){var a=[],n=$("#"+e),o=[],r=n.data("select2").dataAdapter;if(r.$element.children().each(function(){if(!$(this).is("option")&&!$(this).is("optgroup"))return!0;o.push(r.item($(this)))}),!0===n.data("select2").options.options.multiple){var s=$("#"+e).select2("data");$.each(s,function(e,t){a.push(t)})}if($.each(a,function(e,t){t.selected=!0}),t){var i=[];return $.each(a,function(e,t){i.push(t.id)}),n.select2("val",""),i.join(";")}return n.select2("val",""),a},this.Select2GetDescription=function(e,t,a){var n=[],o=$("#"+e),r=[];if(adapter=o.data("select2").dataAdapter,adapter.$element.children().each(function(){if(!$(this).is("option")&&!$(this).is("optgroup"))return!0;r.push(adapter.item($(this)))}),t){var s=[];return"string"==typeof a&&$.each(a.split(";"),function(e,t){$.each(r,function(e,a){a.id===t&&s.push(a.text)})}),Array.isArray(a)&&$.each(a,function(e,t){$.each(r,function(e,a){t.id===a.id&&s.push(a.text)})}),s.join(", ")}return $.each(n,function(e,t){}),n},this.LookUpConvertArray=function(e,t,a){return $.each(e,function(e,n){n.hasOwnProperty("id")||(n.id=this[t]),n.hasOwnProperty("text")||(n.text=this[a]),n.hasOwnProperty("selected")||(n.selected=!1)}),e},this.Select2Load=function(e,t,a,n,o,r,s){var i=$("#"+e);if(t=generalSupport.LookUpConvertArray(t,a,n),$.each(t,function(e,t){i.append($("<option />").val(this.id).text(this.text))}),generalSupport.Select2AssignedValue(e,a,t,o),null!==r){var l=window[r],u=window[r];i.select2({data:t,multiple:!0,allowClear:!0,templateResult:l,templateSelection:u,width:"100%"})}else i.select2({data:t,multiple:!0,allowClear:!0,width:"100%"});i.trigger("change")},this.Select2ItemsRefresh=function(e,t){var a=$("#"+e),n=[],o=a.data("select2").dataAdapter;o.$element.children().each(function(){if(!$(this).is("option")&&!$(this).is("optgroup"))return!0;n.push(o.item($(this)))});var r=[];"string"==typeof t&&$.each(t.split(";"),function(e,t){r.push(t.toString()),$.each(n,function(e,a){t===a.id&&(a.selected=!0,r.push(a.id))})}),Array.isArray(t)&&$.each(t,function(e,t){r.push(t.id.toString()),$.each(n,function(e,a){t.id===a.id&&(a.selected=!0,r.push(a.id))})}),a.val(r),a.trigger("change")},this.Select2AssignedValue=function(e,t,a,n){var o=$("#"+e);if(null!==n){var r=[];"string"==typeof n&&$.each(n.split(";"),function(e,t){r.push(t.toString()),$.each(a,function(e,a){t===a.id&&(a.selected=!0)})}),Array.isArray(n)&&$.each(n,function(e,n){r.push(n.Code.toString()),$.each(a,function(e,a){n[t]===a.id&&(a.selected=!0)})}),o.val(r)}},this.parseStringToDecimal=function(e,t){return(e=","===t?(e=e.replace(/\./g,"")).replace(",","."):e.replace(/,/g,"")).replace(/[^0-9\.[^0-9]]/g,"")},this.NotifyFail=function(e){console.error({code:null,detail:e}),notification.swal.error("",e)},this.NotifyFail=function(e,t,a){if("401"!=t){""!==t&&null!=t||(t="1"),"777"===t?notification.toastr.error("",e):"901"!=t?function(){var a=ErrorDescription(t);""!==a?notification.swal.error("",a):notification.swal.error("",e)}():app.security.Logout(app.user.userId,!0)}else notification.swal.infoCallback(dict.NotAuthorized[generalSupport.LanguageName()],dict.ClickToRefreshPage[generalSupport.LanguageName()],function(){window.location.reload(!0)})},this.TranslateInit=function(e,t,a){var n="";n=null!=a?"/fasi/"+a+"/locales/__lng__."+e+".json":location.href.substring(0,location.href.lastIndexOf("/")+1)+"locales/__lng__."+e+".json",$.i18n.init({resGetPath:n,load:"unspecific",fallbackLng:!1,lng:generalSupport.LanguageName()?generalSupport.LanguageName():constants.defaultLanguageName},function(e){$("#app").i18n(),t.call()})},this.GetCurrentName=function(){var e=window.location.pathname,t=e.substring(e.lastIndexOf("/")+1);return t=(t=(t=t.replace(".aspx","")).replace(".html","")).replace("Popup","")},this.CallBackOfficePage=function(e,t){$.ajax({type:"POST",url:"/fasi/wmethods/backoffice.aspx/MakeURL",contentType:"application/json; charset=utf-8",async:!1,dataType:"json",data:JSON.stringify({codispl:e}),success:function(e){var a=open(e.d+t,"","toolbar=no,resizable=no,location=no,directories=no,status=yes,menubar=no,copyhistory=no,width=750,height=450,left=20,top=20");null!==a&&(a.moveTo(0,0),a.resizeTo(window.screen.availWidth,window.screen.availHeight))},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}})},this.DatePickerValue=function(e){return""!==$(e).val()?moment($(e).val(),generalSupport.DateFormat()):moment("0001-01-01").format(generalSupport.DateFormat())},this.DatePickerValueWithValue=function(e){return e&&e.toString().indexOf("Date(")>-1&&(e=generalSupport.ToJavaScriptDateCustom(e,generalSupport.DateFormat())),""!==e?moment(e,generalSupport.DateFormat()).format("YYYY-MM-DDT00:00:00Z"):moment("0001-01-01").format("YYYY-MM-DDT00:00:00Z")},this.DatePickerValueInputToObject=function(e,t){var a="YYYY-MM-DD";return t&&(a="YYYY-MM-DDTHH:mm:ssZ"),(""!==$(e).val()?moment($(e).val(),generalSupport.DateFormat()+"THH:mm:ss"):moment("0001-01-01")).format(a)},this.CreateVTTimeZone=function(){"undefined"!=typeof moment&&void 0!==app.user.timeZoneVT&&(moment.tz.add(moment.tz.pack(app.user.timeZoneVT)),moment.tz.setDefault("VisualTimeTZ"))},this.DateFormat=function(){var e="DD/MM/YYYY";return null!==localStorage.getItem("languageName")&&"en"===localStorage.getItem("languageName").toLowerCase()&&(e="MM/DD/YYYY"),e},this.DatePickerValueWithHour=function(e){return""!==$(e).val()?moment($(e).val(),generalSupport.DateFormatWithHour()):moment(new Date("0001-01-01T00:00:00Z")).utc()},this.DatePickerWithHourValueInputToObject=function(e){return generalSupport.DatePickerValueWithHour(e).format("YYYY-MM-DDTHH:mm:00")},this.DateFormatWithHour=function(){var e="DD/MM/YYYY HH:mm";return null!==localStorage.getItem("languageName")&&"en"===localStorage.getItem("languageName").toLowerCase()&&(e="MM/DD/YYYY HH:mm"),e},this.DecimalCharacter=function(){var e=",";return null!==localStorage.getItem("languageName")&&("en"!==localStorage.getItem("languageName").toLowerCase()&&"es-mx"!==localStorage.getItem("languageName").toLowerCase()||(e=".")),e},this.DigitGroupSeparator=function(){var e=".";return null!==localStorage.getItem("languageName")&&("en"!==localStorage.getItem("languageName").toLowerCase()&&"es-mx"!==localStorage.getItem("languageName").toLowerCase()||(e=",")),e},this.settingsSet=function(e){localStorage.setItem("settings",JSON.stringify(e))},this.settings=function(){return JSON.parse(localStorage.getItem("settings"))},this.LanguageName=function(){return(null!==localStorage.getItem("languageName")?-1!==localStorage.getItem("languageName").toLowerCase().indexOf("-")?localStorage.getItem("languageName").split("-")[0]:localStorage.getItem("languageName"):constants.defaultLanguageName).toLowerCase()},this.LanguageNameSet=function(e){localStorage.setItem("languageName",e)},this.LanguageIdSet=function(e){localStorage.setItem("languageId",e)},this.LanguageId=function(){return null!==localStorage.getItem("languageId")?localStorage.getItem("languageId"):constants.defaultLanguageId},this.LanguageSet=function(e,t){generalSupport.LanguageIdSet(e),generalSupport.LanguageNameSet(t),app.user&&(app.user.languageID=e,app.user.languageName=t)},this.LanguageSynchronization=function(e,t){var a="";return $.ajax({type:"POST",url:"/fasi/wmethods/User.aspx/LanguageSynchronization",contentType:"application/json; charset=utf-8",async:!1,dataType:"json",data:JSON.stringify({languageId:e,languageName:t}),success:function(e){a=e,generalSupport.LanguageSet(e.d.LanguageId,e.d.LanguageName)},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),a},this.LanguageByCultureName=function(e){return $.ajax({type:"POST",url:"/fasi/wmethods/User.aspx/LanguageByCultureName",contentType:"application/json; charset=utf-8",async:!1,dataType:"json",data:JSON.stringify({languageName:e}),success:function(e){e.d&&(generalSupport.LanguageIdSet(parseInt(e.d.Code)),generalSupport.LanguageNameSet(e.d.CultureCode))},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),""},this.NormalizeDatesInObject=function(e){for(var t in e)null!==e[t]&&void 0!==e[t]&&-1!==e[t].toString().indexOf("Date")&&(-1!==e[t].toString().indexOf("Date(-")?e[t]="0001-01-01T00:00:00"+moment().format("Z"):e[t]=generalSupport.DatePickerValueWithValue(generalSupport.ToJavaScriptDateCustom(e[t],generalSupport.DateFormat())));return e},this.OnError=function(e,t,a,n,o){var r={Message:e,Url:t,Line:a,Column:n,Error:o};if(-1!==t.indexOf("fasi/app/js")||-1!==t.indexOf("fasi/dli")){console.error("Uncontrolled error in fasi",r);var s="";try{$.ajax({type:"POST",async:!1,url:"/fasi/wmethods/General.aspx/Error",contentType:"application/json; charset=utf-8",data:JSON.stringify({Message:r.Message,Url:r.Url,Line:r.Line,Column:r.Column}),dataType:"json",success:function(e){s=e.d},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}})}catch(e){console.error("Uncontrolled error in fasi","Error al realizar trace")}var i=this.ResourceByKey("ShowDetail");i=i.replace("@@key@@",s),swal({title:this.ResourceByKey("UnexpectedError"),html:!0,text:i,type:"error"})}else console.warn("Uncontrolled error in fasi",r);return!0},this.OrderKeysOnObject=function(e){var t={};return Object.keys(e).sort().forEach(function(a){t[a]=e[a]}),t},this.RenderLookUp=function(e,t,a,n,o){null==o&&(o=!1);var r=$("#"+e);r.length>0?(0!==r.children().length&&r.children().remove(),n=generalSupport.LookUpConvertArray(n,"Code","Description"),$.each(n,function(){r.append($("<option />").val(this.id).text(this.text))}),null!==t?r.val(t):r.val(0),o&&r.select2({data:n,multiple:!0,allowClear:!0,width:"100%"})):(r=$("#"+e+"_Dynamic")).length>0&&(r.children().remove(),n=generalSupport.LookUpConvertArray(n,"Code","Description"),$.each(n,function(){r.append("<div class='radio'><label><input type='radio' name='"+e+"' id='"+e+"_"+this.Code+"' value='"+this.Code+"'/>"+this.Description+"</label></div>")}),o&&r.select2({sdata:n,multiple:!0,allowClear:!0,width:"100%"}),null!=t&&t.toString()!==(r.val()||"0").toString()&&$($("input:radio[name="+e+"][value=' + defaultValue + ']")).prop("checked",!0))},this.SetCalendarPosition=function(e){$(e).on("dp.show",function(){if($(this).parents(".ibox-content").length>0){var e=$(this).find(".bootstrap-datetimepicker-widget");e.css({top:e.offset().top,left:e.offset().left,height:e.outerHeight()}),e.appendTo("body"),$(this).parents(".ibox-content").css({overflow:"hidden"})}}).on("dp.hide",function(){$(this).parents(".ibox-content").length>0&&$(this).parents(".ibox-content").css({overflow:""})})},this.RadioNumericValue=function(e){var t=$("input:radio[name="+e+"]:checked").val();return null==t&&(t=0),parseInt(0+t,10)},this.CreateNewModal=function(e){e.cssWidth=e.width>0?{"min-width":.96*e.width+"%"}:{},e.cssHeight=e.height>0?{height:e.height+"%"}:{};var t=$("<div />").attr({role:"dialog"}).addClass("modal fade dynamicModal"),a=$("<div />").attr({role:"document"}).addClass("modal-dialog"),n=$("<div />").addClass("modal-content"),o=$("<div />").addClass("modal-header").html('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>'),r=$("<div />").addClass("modal-body clearfix");a.css(e.cssWidth),n.css(e.cssHeight),o.append(void 0!==e.title?"<h4>"+e.title+"</h4>":""),n.append(o).append(r),a.append(n),t.append(a),e.isExternal?(n.addClass(e.height>0?"":"default-size"),r.html($("<iframe />").attr({frameBorder:0,src:e.url}))):($internalContent=$("<div />").addClass("internalContent").load(e.url),$internalContent.addClass(e.height>0?"overflow-auto":""),r.append($internalContent)),t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()})},this.CreateNewPopover=function(e,t){if(0==$("#"+$(t).attr("aria-describedby")).length){e.cssWidth=e.width>0?{"min-width":e.width}:{},e.cssHeight=e.height>0?{height:e.height}:{},e.title=void 0!==e.title?e.title:" ",e.isExternal||$.extend(e.cssHeight,{overflow:"auto"});var a=$("<div />").attr({role:"tooltip"}).addClass("popover dynamicPopover").css(e.cssWidth).html('<div class="arrow"></div>'),n=$("<h3 />").addClass("popover-title").text(e.title),o=$("<div />").addClass("popover-content").css(e.cssHeight);a.append(n).append(o),$(t).attr({"data-toggle":"popover",title:e.title,"data-content":""}),$(t).popover({template:a[0].outerHTML}),$(t).popover("show");var r=$("#"+$(t).attr("aria-describedby"));e.isExternal?r.find(".popover-content").append($("<iframe />").attr({frameBorder:0,src:e.url})):r.find(".popover-content").load(e.url)}},this.ShowOffCanvas=function(e){var t,a=$("<div />").attr({id:"off-canvas-header"}).addClass("border-bottom");$("#off-canvas").length>0?(t=$("#off-canvas")).empty():t=$("<div />").attr({id:"off-canvas"}).addClass("col-sm-3 col-xs-10"),a.append('<button type="button" class="close" id="closeoffCanvas" aria-hidden="true">×</button>'),void 0!==e.title&&a.append('<h2><i class="fa fa-info-circle"></i>'+e.title+"</h2>"),t.append(a),t.appendTo("body").show("slide",{direction:"right"},300,function(){e.isExternal?t.append($("<iframe />").attr({frameBorder:0,src:e.url})):t.append($("<div/>").attr({id:"off-canvas-content"}).load(e.url))}),a.find("#closeoffCanvas").click(function(e){e.preventDefault(),t.hide("slide",{direction:"right"},300,function(){t.remove()})})},this.Render=function(e){var t=RenderBody(e);e.IsReplacement||(e.IsReplacement=!0),e.IsReplacement?$("#"+e.element).html(t):$("#"+e.element).append(t)},this.RenderBody=function(e){var t="";switch(e.name){case"Template7":t=Template7.compile(e.template)(e.context)}return t}};$(function(e){window.onerror=function(e,t,a,n,o){return generalSupport.OnError(e,t,a,n,o)}});var securitySupport=new function(){this.ValidateAccessRoles=function(e){var t="/fasi/dli/forms/UnauthorizedUser.aspx?urlsource="+encodeURI(window.location.pathname),a=generalSupport.GetParameterByName("InMotionGITToken"),n=generalSupport.UserContext();n.isAnonymous&&null!==a?securitySupport.ValidateRoleByToken(a,e)&&securitySupport.AutoLogIn(a,constants.defaultLanguageId)||(window.location=t):n.isAnonymous?n.isAnonymous?securitySupport.IsRoleExpecial(e)||(window.location="/fasi/security/logIn.aspx?urlsource="+encodeURI(window.location.href)):window.location=t:$.ajax({type:"POST",async:!1,url:constants.fasiApi.base+"Authentication/v1/ValidateAccessRoles",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(e),beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+app.user.token)},success:function(e){e.Successfully||(window.location=t)},error:function(e,a,n){window.location=t}})},this.IsRoleExpecial=function(e){var t=!1;return constants.SpecialRoles||$.ajax({type:"GET",async:!1,url:"/fasi/wmethods/User.aspx/SpecialRoles",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){constants.SpecialRoles=e.d},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),e.forEach(function(e){e==constants.SpecialRoles.AnonymousRole&&(t=!0)}),t},this.IsConnected=function(){generalSupport.UserContext().isAnonymous&&(window.location="/fasi/security/logIn.aspx?urlsource="+encodeURI(window.location.href))},this.AutoLogIn=function(e,t){var a=!1;return $.ajax({type:"POST",async:!1,url:"/fasi/wmethods/User.aspx/AutoLogin",contentType:"application/json; charset=utf-8",data:JSON.stringify({Token:e,LanguageId:t}),dataType:"json",success:function(e){a=e.d},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),a},this.ValidateRoleByToken=function(e,t){var a=!1,n=t.join(",");return $.ajax({type:"POST",async:!1,url:constants.fasiApi.base+"Authentication/v1/ValidateRoleByToken?Token="+e+"&Roles="+n,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({Roles:t}),beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+generalSupport.UserContext().token)},success:function(e){a=e.Successfully},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),a},this.UserCheckEquals=function(e,t){var a=!1;return $.ajax({type:"POST",async:!1,url:"/fasi/wmethods/User.aspx/UserCheckEquals",contentType:"application/json; charset=utf-8",data:JSON.stringify({Token:e,UserId:t}),dataType:"json",success:function(e){a=e.d},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),a},this.PasswordRecovery=function(){var e=$("#UserName").val();null!==e&&""!==e?$.ajax({type:"GET",url:constants.fasiApi.members+"/PasswordRecoveryByEmail?email="+e,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({}),headers:{"Accept-Language":generalSupport.LanguageName()},beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+app.user.token)},success:function(e){!0===e.Successfully?notification.control.success(null,$.i18n.t("app.form.RecoverPasswordSuccessfully")):""!=e.Reason?notification.control.error(null,e.Reason):notification.control.error(null,$.i18n.t("app.form.RecoverPasswordIncorrect"))},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}):notification.control.error(null,$.i18n.t("app.form.RequiredEmail"))},this.Logout=function(e,t,a){localStorage.removeItem("masterMenu"),ajaxJsonHelper.post(constants.fasiApi.members+"UserLogOff",null,function(e){e&&e.Successfully&&$.ajax({type:"POST",async:!1,url:"/fasi/wmethods/User.aspx/LogOut",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){UserClean(),t&&(""!==e.d.Url?window.location.href=e.d.Url:a?window.location.href=constants.defaultPage+"?GSCode="+a:window.location.replace(constants.defaultPage))}})},null,null,!1)},this.SessionLive=function(){$.ajax({type:"GET",async:!1,url:"/fasi/wmethods/User.aspx/SessionLive",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){console.log(e)}})},this.Messages=function(e){var t="",a="";switch(e){case"GS001":t=generalSupport.ResourceByKey("CodeGS001Title"),a=generalSupport.ResourceByKey("CodeGS001Body");break;case"901":t=generalSupport.ResourceByKey("Code901Title"),a=generalSupport.ResourceByKey("Code901Body");break;default:t=generalSupport.ResourceByKey("UndefinedTitle"),a=generalSupport.ResourceByKey("UndefinedMessage")}notification.swal.info(t,a)},this.CreateCaptcha=function(e){captchaContainer=grecaptcha.render("captcha_container",{sitekey:"6LfTaj8UAAAAACq2GGmDoAYlEnitqry9_SCHA4gB",callback:e,hl:generalSupport.LanguageName()})}};app.security=(constants.fields||(constants.fields={}),constants.fields.security||(constants.fields.security={}),constants.fields.security.userProfile||(constants.fields.security.userProfile="userProfile"),constants.fields.security.masterMenu||(constants.fields.security.masterMenu="masterMenu"),constants.fields.security.FASITokenDate||(constants.fields.security.FASITokenDate="FASITokenDate"),constants.fields.security.FASIToken||(constants.fields.security.FASIToken="FASIToken"),constants.fields.security.unauthorized||(constants.fields.security.unauthorized=' <div class="middle-box-error text-center animated fadeInDown">   <h2 id="ResourceNotFound" class="font-bold trn" >{{ResourceUnauthorized}}</h3>   <div id="ResourceNotFoundDetail" class="error-desc trn" >{{ResourceUnauthorizedDetail}}</div> </div>'),UnAuthorized=function(){var e=dict.ResourceUnauthorized[app.user.languageName],t=dict.ResourceUnauthorizedDetail[app.user.languageName];return constants.fields.security.unauthorized.replace("{{ResourceUnauthorized}}",e).replace("{{ResourceUnauthorizedDetail}}",t)},Fields=function(){return constants.fields},UserConvert=function(e){return{userName:e.d.user.username,userId:e.d.user.userId,companyId:e.d.user.companyId,isAnonymous:e.d.user.isAnonymous,isAdministrator:e.d.user.isAdministrator,schemeCode:e.d.user.schemeCode,token:e.d.user.token,clientId:e.d.user.clientId,producerId:e.d.user.producerId,firstNameAndSecondLastName:e.d.user.firstNameAndSecondLastName,languageID:e.d.user.languageID,languageName:e.d.user.languageName,type:e.d.user.type,utcOffset:e.d.user.utcOffset,isEmployee:e.d.user.IsEmployee,sessionId:e.d.user.sessionId,expiration:e.d.user.expiration,timeZoneVT:e.d.user.TimeZoneVT}},WorkerManager=function(){if(app.workers){var e=[];app.workers.forEach(function(t){e.push(t),t()}),e.forEach(function(e){for(var t=app.workers.length-1;t>=0;--t)app.workers[t]===e&&app.workers.splice(t,1)}),e=[]}},GetUser=function(e,t){var a=function(e){$.ajax({url:n,type:"GET",contentType:"application/json; charset=utf-8"}).done(function(t){app.user=UserConvert(t),TokenInit(app.user.token),e(t),WorkerManager()}).fail(function(e,t,a){serrorFunction()})};null==e&&(e={reset:!1}),void 0===e.reset&&(reset=!1),!0===e.reset&&localStorage.removeItem(constants.fields.security.userProfile);var n="/fasi/wmethods/User.aspx/GetUserInformation";return languageName=generalSupport.GetParameterByName("culture"),languageName&&(n=n+"?culture="+languageName),localStorage.getItem(constants.fields.security.userProfile)?(app.user=JSON.parse(localStorage.getItem(constants.fields.security.userProfile)),app.security.SessionIdCheck(app.user.sessionId)?app.security.TokenIsValid()?t(app.user):(TokenInit(app.security.Token(!0)),t(app.user)):a(t)):a(t),"undefined"!=typeof masterSupport&&(masterSupport.user=app.user),app.user},UserClean=function(){generalSupport.LocalStorageRemoveStartWith(constants.fields.security.masterMenu),localStorage.removeItem(constants.fields.security.userProfile),generalSupport.LocalStorageRemoveStartWith("Page_")},MasterMenuKey=function(){return constants.fields.security.masterMenu+"_"+generalSupport.LanguageId()+"_"+app.user.userId},UserContext=function(e,t){return void 0===app.user&&("undefined"!=typeof masterSupport&&void 0!==masterSupport&&void 0!==masterSupport.user?(app.user=masterSupport.user,generalSupport.user=masterSupport.user):GetUser(e,t)),app.user},SessionIdCheck=function(e){var t=!1;return $.ajax({type:"POST",url:"/fasi/wmethods/User.aspx/SessionIdCheck",contentType:"application/json; charset=utf-8",async:!1,data:JSON.stringify({sessionId:e}),dataType:"json",success:function(e){t=e.d.State},error:function(e,a,n){t="Ha ocurrido una falla, por favor intente nuevamente"}}),t},SessionCheck=function(){app.user.isAnonymous||(localStorage.getItem("endTime")&&"undefined"!=localStorage.getItem("endTime")||SessionReset(localStorage.getItem("Interval")),localStorage.Timer=setInterval(function(){var e=Date.parse(localStorage.getItem("endTime"))-new Date;if("false"===localStorage.getItem("IsShow")&&Math.floor(e/1e3)<=30){var t="";null!==app.user&&null!==app.user.sessionId&&(t=app.user.sessionId),generalSupport.Operation("CheckSessionSyncro",{SessionId:t},function(e){0==e.d.Valid?(swal({title:generalSupport.ResourceByKey("ExpirationSectionTitle"),html:!0,text:"<p>"+generalSupport.ResourceByKey("ExpirationSectionBody")+' <b id="pCounter" name="pCounter"></b> '+generalSupport.ResourceByKey("Seconds")+".</p>",type:"warning",buttons:!0,dangerMode:!0,showCancelButton:!0,cancelButtonText:generalSupport.ResourceByKey("ExpirationSectionBtnCancel"),confirmButtonColor:"#18a689",confirmButtonText:generalSupport.ResourceByKey("ExpirationSectionBtnSessionKeep"),closeOnConfirm:!0},function(e){e?(swal.close(),location.reload()):(app.security.Logout(app.user.userId,!0),clearInterval(localStorage.Timer))}),localStorage.IsShow=!0):(app.security.SessionLive(),SessionReset(localStorage.getItem("Interval")))})}else e>=0?$("#pCounter").length&&$("#pCounter").html(Math.floor(e/1e3)):(app.security.Logout(app.user.userId,!0,"GS001"),SessionReset(localStorage.Interval),swal.close(),clearInterval(localStorage.Timer))},1e3))},SessionReset=function(e){var t=new Date;t.setSeconds(t.getSeconds()+parseInt(localStorage.getItem("Interval"))/1e3),localStorage.endTime=t,localStorage.IsShow=!1},Reset=function(e){localStorage.endTime=+new Date+e,localStorage.IsShow=!1},SessionSetUp=function(e){"undefined"!=localStorage.getItem("Interval")&&null!=localStorage.getItem("Interval")||(localStorage.setItem("Interval",6e4*parseInt(e)),localStorage.setItem("Interval",localStorage.getItem("Interval")-24e3))},IsALive=function(e,t){var a,n=generalSupport.GetParameterByName("InMotionGITToken"),o=!1,r=[],s=!1,i="";void 0===e&&(e={reset:!1}),void 0===e.reset&&(reset=!1),r=void 0===e.roles?[]:e.roles,a=void 0!==e.IsConnected&&e.IsConnected,!0===e.reset&&localStorage.removeItem(constants.fields.security.userProfile),localStorage.getItem(constants.fields.security.userProfile)?(app.user=JSON.parse(localStorage.getItem(constants.fields.security.userProfile)),i=app.user.sessionId,s=!TokenIsValid()):o=!0,$.ajax({url:"/fasi/wmethods/User.aspx/IsALive",type:"POST",data:JSON.stringify({IsFirst:o,SessionId:i,TokenRenew:s,Roles:r,InMotionGITToken:n}),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(e){constantsSupport.setup(e.d);var n=generalSupport.findKey(e.d.settings,"FirstPasswordChange");e.d.user?(app.user=UserConvert(e),TokenInit(app.user.token)):e.d.token&&TokenInit(e.d.token);var r=generalSupport.findKey(e.d.settings,"timeout"),s=generalSupport.findKey(e.d.settings,"LanguageId"),l=generalSupport.findKey(e.d.settings,"LanguageName");function u(){void 0!==t?a?(app.security.IsConnected(),t(e),app.security.SessionCheck()):(e.d.authorization.Successfully?t(e):ValidateAccess(e.d),app.security.SessionCheck()):(a?app.security.IsConnected():e.d.authorization&&ValidateAccess(e.d),app.security.SessionCheck()),WorkerManager(),generalSupport.CreateVTTimeZone()}if(generalSupport.settingsSet(e.d.settings),SessionSetUp(r),generalSupport.LanguageSet(s,l),app.user.isAnonymous||SessionReset(r),"undefined"!=typeof masterSupport&&(masterSupport.user=app.user,generalSupport.user=app.user,o||i===app.user.sessionId||UserClean(),masterSupport.Enviroment()),e.d.user||(e.d.user=app.user),0==n)u();else{var c=generalSupport.findKey(e.d.settings,"FirstPasswordChangeUrl");0!=window.location.pathname.toLowerCase().indexOf(c.toLowerCase())?window.location=c:u()}}).fail(function(e,t,a){401==e.status?EndSession():app.core.ErrorHandler(e,t,a)})},ValidateAccess=function(e){var t="/fasi/dli/forms/UnauthorizedUser.aspx?urlsource="+encodeURI(window.location.pathname),a=generalSupport.GetParameterByName("InMotionGITToken");if(e.user.isAnonymous&&null!==a)securitySupport.ValidateRoleByToken(a,roles)&&securitySupport.AutoLogIn(a,constants.defaultLanguageId)||(window.location=t);else if(e.user.isAnonymous)if(e.user.isAnonymous){var n=generalSupport.GetParameterByName("GSCode");e.authorization.Successfully||null!=n||(window.location="/fasi/default.aspx?GSCode="+e.authorization.Code)}else window.location=t;else e.authorization.Successfully||(window.location=t)},Authorization=function(e,t){void 0!==e.IsConnected?app.user.isAnonymous?e.Element.html(UnAuthorized()):t():(void 0===e.roles&&(e.roles=[]),$.ajax({url:"/fasi/wmethods/User.aspx/Authorization",type:"POST",data:JSON.stringify({Roles:e.roles}),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+app.user.token)}}).done(function(a){a.d.Successfully?t():e.Element.html(UnAuthorized())}).fail(function(e,t,a){serrorFunction()}))},PageSetup=function(e){e.Pathname.toLowerCase().endsWith("default.aspx")?app.security.Authorization(e,e.CallBack):e.Pathname.toLowerCase().endsWith("popup.html")?app.security.IsALive(e,e.CallBack):e.Custom||0!=e.Custom?app.security.IsALive(e,e.CallBack):(app.workers.push(e.CallBack),masterSupport.Init(e))},EndSession=function(){clearInterval(localStorage.Timer),localStorage.clear(),window.location.replace(constants.defaultPage)},Logout=function(e,t,a){app.core.Post(constants.fasiApi.members+"UserLogOff",!0,!1,void 0,!1,function(e){e&&e.Successfully&&$.ajax({type:"POST",async:!1,url:"/fasi/wmethods/User.aspx/LogOut",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){UserClean(),clearInterval(localStorage.Timer),localStorage.clear(),t&&(""!==e.d.Url?window.location.href=e.d.Url:a?window.location.href=constants.defaultPage+"?GSCode="+a:window.location.replace(constants.defaultPage))}})},null)},IsConnected=function(){app.user.isAnonymous&&(window.location="/fasi/security/logIn.aspx?urlsource="+encodeURI(window.location.href))},IsRoleExpecial=function(e){var t=!1;return constants.SpecialRoles||$.ajax({type:"GET",async:!1,url:"/fasi/wmethods/User.aspx/SpecialRoles",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){constants.SpecialRoles=e.d},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),e.forEach(function(e){e==constants.SpecialRoles.AnonymousRole&&(t=!0)}),t},UserCheckEquals=function(e,t){var a=!1;return $.ajax({type:"POST",async:!1,url:"/fasi/wmethods/User.aspx/UserCheckEquals",contentType:"application/json; charset=utf-8",data:JSON.stringify({Token:e,UserId:t}),dataType:"json",success:function(e){a=e.d},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),a},AutoLogIn=function(e,t){var a=!1;return $.ajax({type:"POST",async:!1,url:"/fasi/wmethods/User.aspx/AutoLogin",contentType:"application/json; charset=utf-8",data:JSON.stringify({Token:e,LanguageId:t}),dataType:"json",success:function(e){a=e.d},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),a},SessionLive=function(){$.ajax({type:"GET",async:!1,url:"/fasi/wmethods/User.aspx/SessionLive",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){console.log(e)}})},Token=function(e){return localStorage.getItem(constants.fields.security.FASIToken)},TokenIsValid=function(){var e=!1;return localStorage.getItem(constants.fields.security.FASITokenDate)&&(e=((new Date).getTime()-new Date(localStorage.getItem(constants.fields.security.FASITokenDate)).getTime())/6e4<5),e},TokenInit=function(e,t){localStorage.setItem(constants.fields.security.FASITokenDate,new Date),localStorage.setItem(constants.fields.security.FASIToken,e),app.user.token=e,localStorage.setItem(constants.fields.security.userProfile,JSON.stringify(app.user))},CreateToken=function(){var e="";return $.ajax({type:"POST",async:!1,url:"/fasi/wmethods/User.aspx/Token",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e=t.d.Token},error:function(e,t,a){generalSupport.ErrorHandler(e,t,a)}}),TokenInit(e),e},AuthorizationProcess=function(e){app.user.isAnonymous,window.location},{GetUser:function(e,t){GetUser(e,t)},GetUser2:function(e){return GetUser2(e,function(){masterSupport.Enviroment()})},Fields:function(){return constants.fields},UserClean:function(){UserClean()},EndSession:function(){return EndSession()},UserContext:function(e){return app.user},SessionIdCheck:function(e){return SessionIdCheck(e)},SessionCheck:function(){return SessionCheck()},SessionReset:function(e){return SessionReset(e)},SessionSetUp:function(e){SessionSetUp(e)},Logout:function(e,t,a){Logout(e,t,a)},IsConnected:function(){IsConnected()},IsRoleExpecial:function(e){return IsRoleExpecial(e)},UserCheckEquals:function(e,t){return UserCheckEquals(e,t)},AutoLogIn:function(e,t){return AutoLogIn(e,t)},SessionLive:function(){return SessionLive()},Token:function(e){return Token(e)},TokenIsValid:function(){return TokenIsValid()},TokenInit:function(e,t){TokenInit(e,t)},IsALive:function(e,t){return IsALive(e,t)},Authorization:function(e,t){return Authorization(e,t)},PageSetup:function(e){PageSetup(e)},MasterMenuKey:function(){return MasterMenuKey()},AuthorizationProcess:function(e){return AuthorizationProcess(e)}});